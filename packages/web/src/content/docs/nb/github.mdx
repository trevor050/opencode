---
title: GitHub
description: Bruk opencode i GitHub-problemer og pull-forespørsler.
---

opencode integreres med GitHub-arbeidsflyten din. Nevn `/opencode` eller `/oc` i kommentaren din, og opencode vil utføre oppgaver i din GitHub Actions-løper.

---

## Funksjoner

- **Triage-problemer**: Be opencode se på et problem og forklare det for deg.
- **Fiks og implementer**: Be opencode om å fikse et problem eller implementere en funksjon. Og den vil fungere i en ny gren og sender inn en PR med alle endringene.
- **Sikkert**: opencode kjører inne i GitHubs løpere.

---

## Installasjon

Kjør følgende kommando i et prosjekt som er i en GitHub-repo:

```bash
opencode github install
```

Dette vil lede deg gjennom å installere GitHub-appen, lage arbeidsflyten og sette opp hemmeligheter.

---

### Manuell oppsett

Eller du kan sette den opp manuelt.

1. **Installer GitHub-appen**

   Gå over til [**github.com/apps/opencode-agent**](https://github.com/apps/opencode-agent). Sørg for at den er installert på mållageret.

2. **Legg til arbeidsflyten**

   Legg til følgende arbeidsflytfil til `.github/workflows/opencode.yml` i repoen. Sørg for å sette riktige `model` og nødvendige API nøkler i `env`.

   ```yml title=".github/workflows/opencode.yml" {24,26}
   name: opencode

   on:
     issue_comment:
       types: [created]
     pull_request_review_comment:
       types: [created]

   jobs:
     opencode:
       if: |
         contains(github.event.comment.body, '/oc') ||
         contains(github.event.comment.body, '/opencode')
       runs-on: ubuntu-latest
       permissions:
         id-token: write
       steps:
          - name: Checkout repository
            uses: actions/checkout@v6
            with:
              fetch-depth: 1
              persist-credentials: false

          - name: Run OpenCode
           uses: anomalyco/opencode/github@latest
           env:
             ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
           with:
             model: anthropic/claude-sonnet-4-20250514
             # share: true
             # github_token: xxxx
   ```

3. **Lagre API-nøklene i hemmeligheter**

   Utvid **Hemmeligheter og variabler** til venstre i **innstillingene** for organisasjonen eller prosjektet og velg **Handlinger**. Og legg til de nødvendige API-nøklene.

---

## Konfigurasjon

- `model`: Modellen som skal brukes med opencode. Tar formatet `provider/model`. Dette er **obligatorisk**.
- `agent`: Agenten som skal brukes. Må være en primær agent. Faller tilbake til `default_agent` fra config eller `"build"` hvis ikke funnet.
- `share`: Om opencode-økten skal deles. Standard er **true** for offentlige depoter.
- `prompt`: Valgfri egendefinert melding for å overstyre standard oppførsel. Bruk dette til å tilpasse hvordan opencode behandler forespørsler.
- `token`: Valgfritt GitHub-tilgangstoken for å utføre operasjoner som å lage kommentarer, foreta endringer og åpne pull-forespørsler. Som standard bruker opencode installasjonstilgangstokenet fra opencode GitHub-appen, så forpliktelser, kommentarer og pull-forespørsler ser ut til å komme fra appen.

  Alternativt kan du bruke GitHub Action-løperens [innebygde `GITHUB_TOKEN`](https://docs.github.com/en/actions/tutorials/authenticate-with-github_token) uten å installere opencode GitHub-appen. Bare sørg for å gi de nødvendige tillatelsene i arbeidsflyten din:

  ```yaml
  permissions:
    id-token: write
    contents: write
    pull-requests: write
    issues: write
  ```

  Du kan også bruke en [personlig tilgangstoken](https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens)(PAT) hvis foretrukket.

---

## Støttede hendelser

opencode kan utløses av følgende GitHub-hendelser:

| Hendelsestype                 | Utløst av                               | Detaljer                                                                                                                |
| ----------------------------- | --------------------------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| `issue_comment`               | Kommenter et problem eller PR           | Nevn `/opencode` eller `/oc` i kommentaren din. opencode leser kontekst og kan opprette grener, åpne PR-er eller svare. |
| `pull_request_review_comment` | Kommenter spesifikke kodelinjer i en PR | Nevn `/opencode` eller `/oc` mens du ser gjennom koden. opencode mottar filbane, linjenummer og diff-kontekst.          |
| `issues`                      | Utgave åpnet eller redigert             | Utløs opencode automatisk når problemer opprettes eller endres. Krever `prompt` inngang.                                |
| `pull_request`                | PR åpnet eller oppdatert                | Utløs opencode automatisk når PR-er åpnes, synkroniseres eller gjenåpnes. Nyttig for automatiserte anmeldelser.         |
| `schedule`                    | Cron-basert tidsplan                    | Kjør opencode etter en tidsplan. Krever `prompt` inngang. Utdata går til logger og PR (ingen problem å kommentere).     |
| `workflow_dispatch`           | Manuell utløser fra GitHub UI           | Utløs opencode på forespørsel via fanen Handlinger. Krever `prompt` inngang. Utdata går til logger og PR-er.            |

### Tidsplan Eksempel

Kjør opencode på en tidsplan for å utføre automatiserte oppgaver:

```yaml title=".github/workflows/opencode-scheduled.yml"
name: Scheduled OpenCode Task

on:
  schedule:
    - cron: "0 9 * * 1" # Every Monday at 9am UTC

jobs:
  opencode:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: write
      pull-requests: write
      issues: write
    steps:
      - name: Checkout repository
        uses: actions/checkout@v6
        with:
          persist-credentials: false

      - name: Run OpenCode
        uses: anomalyco/opencode/github@latest
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        with:
          model: anthropic/claude-sonnet-4-20250514
          prompt: |
            Review the codebase for any TODO comments and create a summary.
            If you find issues worth addressing, open an issue to track them.
```

For planlagte arrangementer er `prompt`-inngangen **påkrevd** siden det ikke er noen kommentarer å trekke ut instruksjoner fra. Planlagte arbeidsflyter kjører uten brukerkontekst for tillatelsessjekking, så arbeidsflyten må gi `contents: write` og `pull-requests: write` hvis du forventer at opencode oppretter grener eller PR-er.

---

### Pull Request Eksempel

Gjennomgå PR-er automatisk når de åpnes eller oppdateres:

```yaml title=".github/workflows/opencode-review.yml"
name: opencode-review

on:
  pull_request:
    types: [opened, synchronize, reopened, ready_for_review]

jobs:
  review:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: read
      pull-requests: read
      issues: read
    steps:
      - uses: actions/checkout@v6
        with:
          persist-credentials: false
      - uses: anomalyco/opencode/github@latest
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          model: anthropic/claude-sonnet-4-20250514
          use_github_token: true
          prompt: |
            Review this pull request:
            - Check for code quality issues
            - Look for potential bugs
            - Suggest improvements
```

For `pull_request`-hendelser, hvis ingen `prompt` er oppgitt, går opencode som standard gjennom pull-forespørselen.

---

### Issues Triage Eksempel

Triage automatisk nye problemer. Dette eksemplet filtrerer til kontoer eldre enn 30 dager for å redusere spam:

```yaml title=".github/workflows/opencode-triage.yml"
name: Issue Triage

on:
  issues:
    types: [opened]

jobs:
  triage:
    runs-on: ubuntu-latest
    permissions:
      id-token: write
      contents: write
      pull-requests: write
      issues: write
    steps:
      - name: Check account age
        id: check
        uses: actions/github-script@v7
        with:
          script: |
            const user = await github.rest.users.getByUsername({
              username: context.payload.issue.user.login
            });
            const created = new Date(user.data.created_at);
            const days = (Date.now() - created) / (1000 * 60 * 60 * 24);
            return days >= 30;
          result-encoding: string

      - uses: actions/checkout@v6
        if: steps.check.outputs.result == 'true'
        with:
          persist-credentials: false

      - uses: anomalyco/opencode/github@latest
        if: steps.check.outputs.result == 'true'
        env:
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
        with:
          model: anthropic/claude-sonnet-4-20250514
          prompt: |
            Review this issue. If there's a clear fix or relevant docs:
            - Provide documentation links
            - Add error handling guidance for code examples
            Otherwise, do not comment.
```

For `issues`-hendelser er `prompt`-inngangen **påkrevd** siden det ikke er noen kommentarer å trekke ut instruksjoner fra.

---

## Egendefinerte meldinger

Overstyr standardmeldingen for å tilpasse oppførselen til opencode for arbeidsflyten din.

```yaml title=".github/workflows/opencode.yml"
- uses: anomalyco/opencode/github@latest
  with:
    model: anthropic/claude-sonnet-4-5
    prompt: |
      Review this pull request:
      - Check for code quality issues
      - Look for potential bugs
      - Suggest improvements
```

Dette er nyttig for å håndheve spesifikke vurderingskriterier, kodestandarder eller fokusområder som er relevante for prosjektet ditt.

---

## Eksempler

Her er noen eksempler på hvordan du kan bruke opencode i GitHub.

- **Forklar et problem**

  Legg til denne kommentaren i en GitHub-utgave.

  ```
  /opencode explain this issue
  ```

  opencode vil lese hele tråden, inkludert alle kommentarer, og svare med en tydelig forklaring.

- **Fiks et problem**

  I en GitHub-utgave, si:

  ```
  /opencode fix this
  ```

  Og opencode vil opprette en ny gren, implementere endringene og åpne en PR med endringene.

- **Gjennomgå PR-er og gjør endringer**

  Legg igjen følgende kommentar på en GitHub PR.

  ```
  Delete the attachment from S3 when the note is removed /oc
  ```

  opencode vil implementere den forespurte endringen og forplikte den til samme PR.

- **Se gjennom spesifikke kodelinjer**

  Legg igjen en kommentar direkte på kodelinjer i PRs "Filer"-fane. opencode oppdager automatisk filen, linjenumrene og diff-konteksten for å gi presise svar.

  ```
  [Comment on specific lines in Files tab]
  /oc add error handling here
  ```

  Når du kommenterer spesifikke linjer, mottar opencode:
  - Den nøyaktige filen blir gjennomgått
  - De spesifikke kodelinjene
  - Den ulik konteksten rundt
  - Linjenummerinformasjon

  Dette gir mulighet for mer målrettede forespørsler uten å måtte spesifisere filstier eller linjenumre manuelt.
